/*
	Combined JavaScripts

	@codekit-append "../src/useful.thumbnails.js"
	@codekit-append "../../transitions/src/useful.transitions.js"
	@codekit-append "../../polyfills/src/useful.polyfills.js"
*//* **********************************************
     Begin useful.thumbnails.js
********************************************** *//*
	Source:
	van Creij, Maurice (2013). "useful.thumbnails.js: Scrolling through a long list of thumbnails using paging controls.", version 20130814, http://www.woollymittens.nl/.

	License:
	This work is licensed under a Creative Commons Attribution 3.0 Unported License.
*/(function(e){"use strict";e.Thumbnails=function(t,n){this.obj=t;this.cfg=n;this.start=function(){this.cfg.square=this.cfg.square||!1;this.cfg.onselected=this.cfg.onselected||function(){};this.obj.className+=this.cfg.square?" tn-square":"";this.clean();this.construct()};this.clean=function(){this.obj.innerHTML=this.obj.innerHTML.replace(/\t|\r|\n/g,"")};this.construct=function(){var e,t;this.cfg.list=this.obj.getElementsByTagName("ul")[0];this.cfg.items=this.cfg.list.getElementsByTagName("li");this.cfg.links=this.cfg.list.getElementsByTagName("a");this.cfg.images=this.cfg.list.getElementsByTagName("img");this.cfg.list.style.marginLeft="0px";this.cfg.leftButton=document.createElement("button");this.cfg.leftButton.innerHTML="&lt;";this.cfg.leftButton.className="tn-left tn-disabled";this.cfg.leftButton.onclick=this.onLeftButton();this.obj.appendChild(this.cfg.leftButton);this.cfg.rightButton=document.createElement("button");this.cfg.rightButton.innerHTML="&gt;";this.cfg.rightButton.className="tn-right tn-enabled";this.cfg.rightButton.onclick=this.onRightButton();this.obj.appendChild(this.cfg.rightButton);if(this.cfg.square)for(e=0,t=this.cfg.images.length;e<t;e+=1){this.cfg.links[e].addEventListener("click",this.onSelected(e));this.cfg.images.onload=this.center(this.cfg.images[e]);this.center(this.cfg.images[e])}};this.center=function(e){var t,n,r;r=this.obj.offsetHeight;e.parentNode.style.width=r+"px";e.parentNode.style.height=r+"px";t=e.offsetWidth;n=e.offsetHeight;if(t>n){t=t/n*r;n=r}else{n=n/t*r;t=r}e.style.width=Math.round(t)+"px";e.style.height=Math.round(n)+"px";e.style.left="50%";e.style.top="50%";e.style.marginLeft=Math.round(-t/2)+"px";e.style.marginTop=Math.round(-n/2)+"px"};this.measure=function(){var e=!1,t={},n=0;t.currentLeft=parseInt(this.cfg.list.style.marginLeft,10);t.buttonsWidth=this.cfg.leftButton.offsetWidth+this.cfg.rightButton.offsetWidth;t.pageWidth=this.obj.offsetWidth-t.buttonsWidth;t.totalWidth=0;t.pageLeft=0;for(var r=0,i=this.cfg.items.length;r<i;r+=1){n=this.cfg.items[r].offsetWidth;t.totalWidth+=n;t.totalWidth>-t.currentLeft&&(t.pageLeft+n<t.pageWidth&&!e?t.pageLeft+=n:e=!0)}t.maxLeft=t.pageWidth-t.totalWidth;return t};this.left=function(){var t=this.measure();if(t.currentLeft+t.pageLeft<0){e.transitions.byRules(this.cfg.list,{marginLeft:t.currentLeft+t.pageLeft+"px"});this.enableBoth()}else{e.transitions.byRules(this.cfg.list,{marginLeft:"0px"});this.enableRight()}return!1};this.right=function(){var t=this.measure();if(t.currentLeft-t.pageLeft>t.maxLeft){e.transitions.byRules(this.cfg.list,{marginLeft:t.currentLeft-t.pageLeft+"px"});this.enableBoth()}else{e.transitions.byRules(this.cfg.list,{marginLeft:t.maxLeft+"px"});this.enableLeft()}return!1};this.focus=function(t){var n,r,i=this.measure(),s;for(n=0,r=this.cfg.links.length;n<r;n+=1)this.cfg.links[n].className=n===t?"tn-active":"tn-passive";s=(i.pageWidth+i.buttonsWidth-this.cfg.items[t].offsetWidth)/2-this.cfg.items[t].offsetLeft;if(s>0){e.transitions.byRules(this.cfg.list,{marginLeft:"0px"});this.enableRight()}else if(s<i.maxLeft){e.transitions.byRules(this.cfg.list,{marginLeft:i.maxLeft+"px"});this.enableLeft()}else{e.transitions.byRules(this.cfg.list,{marginLeft:s+"px"});this.enableBoth()}};this.enableBoth=function(){this.cfg.leftButton.className=this.cfg.leftButton.className.replace(/disabled/,"enabled");this.cfg.rightButton.className=this.cfg.rightButton.className.replace(/disabled/,"enabled")};this.enableLeft=function(){this.cfg.leftButton.className=this.cfg.leftButton.className.replace(/disabled/,"enabled");this.cfg.rightButton.className=this.cfg.rightButton.className.replace(/enabled/,"disabled")};this.enableRight=function(){this.cfg.leftButton.className=this.cfg.leftButton.className.replace(/enabled/,"disabled");this.cfg.rightButton.className=this.cfg.rightButton.className.replace(/disabled/,"enabled")};this.onSelected=function(e){var t=this;return function(n){t.cfg.onselected(e,n)}};this.onRedraw=function(e){var t=this;return function(){t.redraw(e);return!1}};this.onLeftButton=function(){var e=this;return function(){e.left();return!1}};this.onRightButton=function(){var e=this;return function(){e.right();return!1}}}})(window.useful=window.useful||{});(function(e){"use strict";var t=t||{};t.select=function(e,t){var n,r,i;t=t||document;e=typeof e=="string"?{rule:e,parent:t}:e;e.parent=e.parent||document;e.data=e.data||{};i=typeof document.querySelectorAll!="undefined"?e.parent.querySelectorAll(e.rule):typeof jQuery!="undefined"?jQuery(e.parent).find(e.rule).get():[];if(typeof e.handler=="undefined")return i;for(n=0,r=i.length;n<r;n+=1)e.handler(i[n],e.data.create())};t.compatibility=function(){var e,t,n;t=document.createElement("div");typeof t.style.MozTransition!="undefined"&&(e="transitionend");try{document.createEvent("OTransitionEvent");e="oTransitionEnd"}catch(r){n=null}try{document.createEvent("WebKitTransitionEvent");e="webkitTransitionEnd"}catch(r){n=null}try{document.createEvent("transitionEvent");e="transitionend"}catch(r){n=null}t=n;return e};t.byClass=function(e,n,r,i,s,o){var u,a,f,l;i=i||function(){};f=t.compatibility();u=new RegExp(n.trim().replace(/ {2,}/g," ").split(" ").join("|"),"g");a=new RegExp(r,"g");if(typeof f!="undefined"){e.addEventListener(f,l=function(){i();e.removeEventListener(f,l,!0)},!0);e.className=(e.className.replace(u,"")+" "+r).replace(/ {2,}/g," ").trim()}else if(typeof jQuery!="undefined"&&typeof jQuery.ui!="undefined"){s=s||500;o=o||"swing";jQuery(e).switchClass(n.replace(a,""),r,s,o,i)}else{e.className=(e.className.replace(u,"")+" "+r).replace(/ {2,}/g," ").trim();i()}};t.prefix=function(e){return navigator.userAgent.match(/webkit/gi)?"webkit"+e.substr(0,1).toUpperCase()+e.substr(1):navigator.userAgent.match(/firefox/gi)?"Moz"+e.substr(0,1).toUpperCase()+e.substr(1):navigator.userAgent.match(/microsoft/gi)?"ms"+e.substr(0,1).toUpperCase()+e.substr(1):navigator.userAgent.match(/opera/gi)?"O"+e.substr(0,1).toUpperCase()+e.substr(1):e};t.byRules=function(e,n,r){var i,s,o;n.transitionProperty=n.transitionProperty||"all";n.transitionDuration=n.transitionDuration||"300ms";n.transitionTimingFunction=n.transitionTimingFunction||"ease";r=r||function(){};s=t.compatibility();if(typeof s!="undefined"){e.addEventListener(s,o=function(){r();e.removeEventListener(s,o,!0)},!0);for(i in n)if(n.hasOwnProperty(i)){e.style[t.compatibility(i)]=n[i];e.style[i]=n[i]}}else if(typeof jQuery!="undefined"){var u,a;u=n.transitionTimingFunction.match(/ease/gi)?"swing":"linear";a=parseInt(n.transitionDuration.replace(/s/g,"000").replace(/ms/g,""),10);delete n.transitionProperty;delete n.transitionDuration;delete n.transitionTimingFunction;jQuery(e).animate(n,a,u,r)}else{for(i in n)if(n.hasOwnProperty(i)){e.style[t.compatibility(i)]=n[i];e.style[i]=n[i]}r()}};e.transitions=e.transitions||{};e.transitions.select=t.select;e.transitions.byClass=t.byClass;e.transitions.byRules=t.byRules})(window.useful=window.useful||{});(function(e){"use strict";var t=t||{};t.html5=function(){var e,t,n;n=["section","nav","article","aside","hgroup","header","footer","dialog","mark","dfn","time","progress","meter","ruby","rt","rp","ins","del","figure","figcaption","video","audio","source","canvas","datalist","keygen","output","details","datagrid","command","bb","menu","legend"];if(navigator.userAgent.match(/msie/gi))for(e=0,t=n.length;e<t;e+=1)document.createElement(n[e])};t.arrayIndexOf=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n+=1)if(this[n]===e)return n;return-1})};t.querySelectorAll=function(){document.querySelectorAll||(document.querySelectorAll=function(e){var t=document,n=t.documentElement.firstChild,r=t.createElement("STYLE");return n.appendChild(r),t.__qsaels=[],r.styleSheet.cssText=e+"{x:expression(document.__qsaels.push(this))}",window.scrollBy(0,0),t.__qsaels})};t.addEventListener=function(){!window.addEventListener&&function(e,t,n,r,i,s,o){e[r]=t[r]=n[r]=function(e,t){var n=this;o.unshift([n,e,t,function(e){e.currentTarget=n;e.preventDefault=function(){e.returnValue=!1};e.stopPropagation=function(){e.cancelBubble=!0};e.target=e.srcElement||n;t.call(n,e)}]);this.attachEvent("on"+e,o[0][3])};e[i]=t[i]=n[i]=function(e,t){for(var n=0,r;r=o[n];++n)if(r[0]==this&&r[1]==e&&r[2]==t)return this.detachEvent("on"+e,o.splice(n,1)[0][3])};e[s]=t[s]=n[s]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[])};t.consoleLog=function(){if(!window.console){window.console={};window.console.log=function(){var e,t,n="",r=document.getElementById("reportPanel");if(!r){r=document.createElement("DIV");r.id="reportPanel";r.style.background="#fff none";r.style.border="solid 1px #000";r.style.color="#000";r.style.fontSize="12px";r.style.padding="10px";r.style.position=navigator.userAgent.indexOf("MSIE 6")>-1?"absolute":"fixed";r.style.right="10px";r.style.bottom="10px";r.style.width="180px";r.style.height="320px";r.style.overflow="auto";r.style.zIndex="100000";r.innerHTML="&nbsp;";document.body.appendChild(r)}var i=r.innerHTML.length<1e3?r.innerHTML:r.innerHTML.substring(0,800);for(e=0,t=arguments.length;e<t;e+=1)n+=arguments[e]+"<br/>";r.innerHTML=n+i}}};t.objectCreate=function(){typeof Object.create!="function"&&(Object.create=function(e){function t(){}t.prototype=e;return new t})};t.stringTrim=function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});String.prototype.ltrim||(String.prototype.ltrim=function(){return this.replace(/^\s+/,"")});String.prototype.rtrim||(String.prototype.rtrim=function(){return this.replace(/\s+$/,"")});String.prototype.fulltrim||(String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")})};t.html5();t.arrayIndexOf();t.querySelectorAll();t.addEventListener();t.consoleLog();t.objectCreate();t.stringTrim()})(window.useful=window.useful||{});